{% extends "base.html" %}
{% block title %}{{ client.full_name }} • Cliente{% endblock %}
{% block content %}

<div class="card mb-3">
  <div class="card-body d-flex align-items-center justify-content-between flex-wrap gap-3">
    <div class="d-flex align-items-center gap-3">
      <div class="brand-mark" style="width:58px;height:58px;border-radius:999px;">
        {{ client.full_name|slice:":1"|upper }}{{ client.full_name|slice:"1:2"|upper }}
      </div>
      <div>
        <h1 class="h4 mb-1">{{ client.full_name }}</h1>
        <div class="text-secondary small">
          Idade: <strong>{{ client.age }} anos</strong> &nbsp;•&nbsp;
          Peso: <strong>{{ client.weight_kg }} kg</strong> &nbsp;•&nbsp;
          Altura: <strong>{{ client.height_m }} m</strong> &nbsp;•&nbsp;
          Objetivo: <strong>{{ client.plan|default:"—" }}</strong>
        </div>
      </div>
    </div>

    <div class="d-flex gap-2">
      <a class="btn btn-outline-secondary btn-pill" href="{% url 'crm:client_update' client.pk %}">Editar Dados</a>
      <button class="btn btn-brand btn-pill" type="button" disabled>Enviar Mensagem</button>
    </div>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <ul class="nav nav-tabs mb-3">
      <li class="nav-item"><a class="nav-link active" href="#">Visão Geral</a></li>
      <li class="nav-item"><a class="nav-link" href="#" aria-disabled="true">Anamnese</a></li>
      <li class="nav-item"><a class="nav-link" href="#" aria-disabled="true">Treinos</a></li>
      <li class="nav-item"><a class="nav-link" href="#" aria-disabled="true">Dietas</a></li>
      <li class="nav-item"><a class="nav-link" href="#" aria-disabled="true">Progresso</a></li>
      <li class="nav-item"><a class="nav-link" href="#" aria-disabled="true">Exames</a></li>
      <li class="nav-item"><a class="nav-link" href="#" aria-disabled="true">Fotos</a></li>
      <li class="nav-item"><a class="nav-link" href="#" aria-disabled="true">Logbook</a></li>
      <li class="nav-item"><a class="nav-link" href="#" aria-disabled="true">Notas</a></li>
    </ul>

    <div class="row g-3">
      <div class="col-12 col-lg-6">
        <div class="p-3 border rounded-4">
          <div class="fw-bold mb-2">Resumo</div>
          <div class="d-flex justify-content-between">
            <div class="text-secondary small">
              Dieta atual:<br>
              Treino atual:<br>
              Última atualização:
            </div>
            <div class="text-end">
              <div class="fw-bold">Cutting 1800kcal</div>
              <div class="fw-bold">ABC Cutting</div>
              <div class="fw-bold">{{ client.last_activity_at|default:"—" }}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-lg-6">
        <div class="p-3 border rounded-4">
          <div class="fw-bold mb-2">Próximas Ações</div>
          <ul class="activity">
            <li><span class="dot"></span> Revisar treino</li>
            <li><span class="dot"></span> Solicitar fotos</li>
            <li><span class="dot"></span> Atualizar metas</li>
          </ul>
        </div>
      </div>

      <div class="col-12">
        <div class="p-3 border rounded-4">
          <div class="fw-bold mb-2">Progresso de Peso</div>
          <div class="chart-wrap">
            <svg viewBox="0 0 800 220" class="w-100">
              <path d="M40,80 L260,95 L480,110 L760,135"
                    fill="none" stroke="var(--brand)" stroke-width="4" stroke-linecap="round"/>
              <g class="chart-grid">
                <line x1="40" y1="180" x2="760" y2="180" />
                <line x1="40" y1="130" x2="760" y2="130" />
                <line x1="40" y1="80" x2="760" y2="80" />
                <line x1="40" y1="30" x2="760" y2="30" />
              </g>
              <g class="chart-axis">
                <text x="40" y="205">Sem 1</text>
                <text x="260" y="205">Sem 2</text>
                <text x="480" y="205">Sem 3</text>
                <text x="760" y="205" text-anchor="end">Sem 4</text>
              </g>
            </svg>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

{% endblock %}
